<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Book an Appointment | PrimeCare Health Clinic</title>

  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/layout.css" />
  <link rel="stylesheet" href="css/components.css" />
</head>

<body>

<header class="main-header">
  <div class="logo-area">
    <img src="assets/Gemini_Generated_Image_s73ghws73ghws73g.png" alt="Clinic Logo" width="30" />
    <strong class="brand-name">PrimeCare Health Clinic</strong>
  </div>

  <nav class="main-nav">
    <a href="index.html">Home</a>
    <a href="doctors.html">Our Doctors</a>
    <a href="diagnostics.html">Diagnostics</a>
  </nav>
</header>

<main>

<section class="form-hero">
  <div class="container flex-row">
    <div>
      <h1>Book Your Consultation</h1>
      <p>Select your specialist and schedule a visit in under 2 minutes.</p>
    </div>
  </div>
</section>

<section class="container section-padding">
  <section class="form-card">

    <form id="appointmentForm" class="appointment-form">

      <!-- Patient Info -->
      <fieldset class="form-section">
        <legend class="form-heading">Patient Information</legend>

        <input type="text" id="a_name" placeholder="Full Name" required />
        <input type="tel" id="a_phone" placeholder="Phone Number" required />
        <input type="email" id="a_email" placeholder="Email (optional)" />
      </fieldset>

      <!-- Visit Details -->
      <fieldset class="form-section">
        <legend class="form-heading">Visit Details</legend>

        <select id="a_department">
          <option value="">Select Department</option>
          <option>General Medicine</option>
          <option>Cardiology</option>
          <option>Orthopedics</option>
        </select>

        <select id="a_doctor" required>
          <option value="">Select Doctor</option>
          <option>Dr. Amit Sharma</option>
          <option>Dr. Neha Verma</option>
        </select>

        <input type="date" id="a_date" required />

        <select id="a_time_slot">
          <option>Morning</option>
          <option>Afternoon</option>
          <option>Evening</option>
        </select>
      </fieldset>

      <!-- Notes -->
      <fieldset class="form-section">
        <legend class="form-heading">Additional Notes</legend>
        <textarea id="a_message" rows="3"></textarea>
      </fieldset>

      <button type="submit" class="btn btn-primary btn-large">
        Confirm Booking
      </button>

    </form>
  </section>
</section>

</main>

<footer class="main-footer">
  <p>&copy; 2026 PrimeCare Health Clinic</p>
</footer>

<!-- üî• FIREBASE SCRIPT (CORRECT PLACE) -->
<script type="module">
  import { collection, addDoc, Timestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

import { db } from "./js/firebase.js";
import { collection, addDoc, Timestamp }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const appointmentForm = document.getElementById("appointmentForm");

appointmentForm.addEventListener("submit", async (e) => {
  e.preventDefault();

  const appointmentData = {
    name: document.getElementById("a_name").value,
    phone: document.getElementById("a_phone").value,
    email: document.getElementById("a_email").value || "",
    department: document.getElementById("a_department").value,
    doctor: document.getElementById("a_doctor").value,
    date: document.getElementById("a_date").value,
    timeSlot: document.getElementById("a_time_slot").value,
    message: document.getElementById("a_message").value || "",
    createdAt: Timestamp.now()
  };

  try {
    await addDoc(collection(db, "appointments"), appointmentData);
    alert("‚úÖ Appointment booked successfully!");
    appointmentForm.reset();
  } catch (error) {
    console.error(error);
    alert("‚ùå Failed to book appointment.");
  }
});
</script>

</body>
</html>
